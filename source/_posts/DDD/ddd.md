---
title: 领域驱动设计 | 战略设计&&战术设计
date: 2021-06-07 21:54:00
author: yancyan
categories: DDD
tags:
- 领域驱动设计
---

## 介绍
对于领域，我们习惯的描述为金融领域、制药领域、化工领域和建筑领域等。在各领域内都有自己的各种业务规则，如何把控这些规则变化，应对各领域的复杂知识，一般采用分而治之。领域驱动设计常以战略设计和战术设计将整个领域完整的展现出来，其作用范围即面向技术也面向业务。从战略角度规划系统，划分领域。而从战术角度在技术层面指导我们如何设计。

## 战略设计

### 1. 统一语言
如何提炼领域知识，有很多种方法，如事件风暴、用例分析方法、用户故事设置各种会议等，最终目的是提炼出领域知识，在提炼过程中达成的描述上的一致性，包含系统目标、系统范围和系统功能等。


### 2. 领域拆分
领域本身是复杂无边际的，借助分而治之将问题逐级细分来降低业务的复杂度和技术复杂度，将复杂的领域知识划分出清晰的边界，反过来控制着划分后不那么复杂的世界，即领域拆分以后的子领域

### 3. 子域拆分
在解决实际问题时，我们习惯将问题进行拆分，依据各不相同，在领域驱动设计中，更偏向基于业务的拆分，降低业务复杂度，也分离技术实现的复杂度。按业务拆分以后的子领域在权重上存在差异，依照重要性和功能分为三类。

**核心域**
 
核心服务，代表产品的核心竞争力

**支撑域**

支撑服务，需要但是又达不到核心价值，围绕产品内部需要，但是又不能单独变更为第三方服务

**通用域**

体现为中间件服务或第三方服务，

### 4. 界限上下文
在领域/子域中，我们会创建一个概念上的领域边界，在这个边界中，任何领域对象都只表示特定于该边界内部确切的含义，这样的边界就称为边界上下文。

### 5. 上下文识别
对上下文的识别没有可遵循的标准，从不同的角度切入会识别到不同的上下文。

我们识别上下文的目的是为了控制上下文，控制上下文边界和大小，为了保住上下文不会因过度成长而崩溃或过度伸缩而失去价值。


### 6. 上下文映射
如何组织上下文，使其协作执行，领域驱动设计提出了几种常见模式

- 合作关系：同声同死
- 共享内核：上下文共享领域实体
- 客户方和供应方：上下游依赖
- 遵奉：下游顺应上游
- 各行其道： 相互隔离，互不影响
- 防腐层：上下游中间增加屏障
- 开放主机服务：上下游中间增加协议，规范下游堆上游的集成

为了实现上下文映射，将不同上下文连贯起来，常见借助如RPC、HTTP、消息队列等方式。


### 7. 分层架构
界限上下文属于架构设计层次，主要针对的是层次的垂直切分，按照经典的DDD分层结构，共分四层：
1. User Interface 用户界面层，向用户展示信息或传入用户命令
2. Application 应用层，协调应用的活动，但是不包含业务逻辑，通过编排领域模型，使他们相互协作
3. Domain 领域层
4. Infrastructure 基础实施层，提供公共的基础设施组件，如持久化机制，消息管道的读取和写入等


## 战术设计
相比于战略设计，战术设计更侧重于怎么执行，详细的设计和编码

### 1. 聚合
聚合本身是由一个或多个实体及值对象组成，其中一个实体作为聚合根，管理着内部关联的实体与值对象，对外代表着聚合，外部来访者可以通过聚合根进行访问。

### 2. 实体
拥有唯一的身份标识符，内含属性作为该实体的静态特征作为聚合所拥有的领域知识，拥有着自身相关的领域知识

### 3. 值对象
基础类型的延申，既能封装基础类型，又能约束内部属性间的关系，还能拥有自身的领域行为，而与实体的而区别是没有唯一标识。


### 4. 聚合拆分

### 5. 聚合协作

### 6. 应用服务
### 7. 领域服务
### 8. 领域事件
### 9. 资源库
### 10. 工厂

### 7. 分层架构